# 与 Eramaker 的差异

> 翻译自原文档：https://osdn.net/projects/emuera/wiki/diff

## 修复错误和不自然的行为

### 数组的最后一个元素不可用

在 Eramaker 中，如果数组的最后一个元素不为零，数据将在加载时被销毁。

这个问题在 Emuera 中不会发生。

这个问题是由于 Eramaker 没有一个一致的保存和加载规范，而 Emuera 有一个一致的保存规范。

因此，如果你用 Eramaker 保存，用 Emuera 加载，问题就不会发生，但如果你用 Emuera 保存，用 Eramaker 加载，问题就会再现。

### 单元运算符`-`的异常

在 Eramaker 中，存在着诸如-100<0是假的问题。

这个问题在 Emuera 中不会发生。

### 文件的最后一行不会被读取

Eramaker 会忽略没有换行代码的行。

这意味着文件的最后一行在`CSV`和`ERB`中都被忽略了。

Emuera 没有再现这种行为。

### 如果数组中存在额外的元素，它们将被忽略

```
A:1:2 = 34
```

Eramaker上述表达式将把34分配给`A:1`。

Emuera中这是一个错误。

### 不能使用特定格式的阵列调用

Eramaker 允许你使用 A:0 和 A:(COUNT+1) 等变量。

另一方面，双数组变量，如`ABL:0:2`或`TALENT:(COUNT+1):2`将导致错误。

另外，如果你在调用字符串变量时省略了参数，你可能会得到一个错误。

在 Emuera，这个问题不会发生。

如果双数组的参数是一个常数或表达式，则不会发生错误，而且可以省略字符串变量的参数。

### 将CSV中的异常数字视为整数

```
0,ローター,200
0xFF,ルーター,200
```

如果在`Item.csv`中发现上述描述，Eramaker 将把`0xFF`解释为0，`TALENT:0`将被定义为一个路由器。

Emuera 将无法重现这一点，它将给出一个错误并使这个定义无效，`TALENT:0`将被定义为一个转子。[?]

### 不自然的记号工作

```
A:0:1:99999 +-RESULTS:0=@=+123|*?=Y
```

上述表达方式在 Eramaker 中起作用。

Emuera 中这是一个错误。

## 与 Eramaker 的其他区别

### 如果SIF后面紧接着是空行、注释行等

```
SIF 条件文
  ;コメント
  PRINT hogehoge
```

Eramaker 总是执行`PRINT`行，因为它不知道`SIF`的下一行是一个`;注释`。

Emuera 和 Kirikiri 一样，只在条件语句为真时执行 PRINT 行。

Emuera 将空行和注释行视为根本不存在，并将SIF的下一行识别为`PRINT hogehoge`。

另外，尽管 Eramaker 允许`IF`和`REPEAT`语句跟在`SIF`后面，但 Emuera 限制了`SIF`后面的行数，因为这往往不是作者的意图。

## 未纠正的错误和不自然的行为

## 改变的特征

## 增加的功能